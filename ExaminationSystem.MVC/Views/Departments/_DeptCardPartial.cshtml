@model ExaminationSystem.MVC.ViewModels.DepartmentViewModels.DepartmentViewModel

@{
	var isBranchView = ViewBag.BranchId != null;
}
<div class="col-lg-4 col-md-6" id="department-@Model.Id">
	<div class="card shadow-lg border-0 rounded-3 h-100 position-relative">
		<div class="card-body p-4 d-flex flex-column justify-content-between">

			<div class="dropdown position-absolute top-0 end-0 m-3" style="@(isBranchView ? "display:none;" : "display:block;")">
				<button class="btn btn-icon" type="button" data-bs-toggle="dropdown" aria-expanded="false">
					<i class="ti ti-dots-vertical"></i>
				</button>
				<ul class="dropdown-menu">
					<li>
						<a class="dropdown-item text-warning edit-department-btn" href="javascript:void(0);" data-id="@Model.Id">
							<i class="ti ti-pencil me-2"></i>Edit
						</a>
					</li>
					<li>
						<a class="dropdown-item text-danger delete-department-btn" href="javascript:void(0);" data-id="@Model.Id">
							<i class="ti ti-trash me-2"></i>Delete
						</a>
					</li>
				</ul>
			</div>

			<div>
				<h5 class="fw-bold text-primary mb-2">@Model.Name Department</h5>
				<p class="text-muted mb-2">Description: <strong>@Model.Disc</strong></p>
				<p class="text-muted mb-2">
					Capacity:
					<strong>
						@(isBranchView ? $"{Model.BranchCapacity} Students" : $"{Model.TotalCapacity} Students")
					</strong>
				</p>
			</div>

			<div class="d-flex gap-2">

				<a href="@Url.Action("ShowStudents", "Branches", new { deptId = Model.Id, branchId = ViewBag.BranchId })" class="btn btn-primary btn-sm w-50">
					Show Students
				</a>
				@if (isBranchView)
				{
					<a href="@Url.Action("ShowCourses", "Branches", new { deptId = Model.Id, branchId = ViewBag.BranchId })" class="btn btn-secondary btn-sm w-50">
						Show Courses
					</a>
				}
				else
				{
					<a href="@Url.Action("ShowCourses", "Branches", new { deptId = Model.Id })" class="btn btn-secondary btn-sm w-50">
						Show Courses
					</a>
				}

			</div>

			<div class="mt-3">
				<span class="badge px-3 py-2 rounded-pill bg-success text-white">Active</span>
			</div>

		</div>
	</div>
</div>

